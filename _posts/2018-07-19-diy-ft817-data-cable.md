---
layout: post
title:  "DIY FT-817 DATA Cable"
date:   2018-07-19 23:35:01 +0000
categories:
  - Amateur-Radio
tags:
  - FT8
  - DIY
---


为了在FT-817上更方便地玩FT8，我做了一根DATA电脑连接线。配合以前买的一根写频线控制FT-817的PTT，整个系统工作的很顺溜。连接线的制作方法很简单，主要材料是一根标准MD6的线，两个立体声插头，一个USB声卡，直接连到一起就搞定。



##### 关于FT-817的DATA接口

这个DATA接口，它的名字叫“数据”，其实是通过**音频电平**、也就是音量，来跟其它设备进行信号传递的一种接口。这是一个彻头彻脑的“音频”设备。

FT8用AFSK模式调制信号。AFSK是**音频**的频移键控。电台收发的是一种音频调制信号。这个声音通过电缆传送到电脑声卡里，再用的wsjt-x这类软件解调、播放声音，这个体系就是这样工作起来的。

我要做的这根线，就是电台到电脑的这段连接电缆。

##### 材料清单

1. **一根Mini-Din 6（MD6）的标准连接线**
   这跟键盘鼠标用的PS/2线接口完全一样。但是PS/2键盘鼠标线大多数省略了2、6两根连线，对于DATA输入输出来说缺了接地线。所以一定要买一根标准的MD6连接线。
2. **一个USB声卡(带3.5mm的音频输入输出）**
   这是为了把FT8的音频信号，跟系统其它软件的音效彻底隔离开。况且我这个2015年的MBP也没有音频输入接口了，只能靠电脑的内置麦克风“听”旁边电台的声音。
3. **两个3.5mm立体声插头**
4. **一根FT-817的ACC控制线**
   如果你想让电脑来自主控制电台的信号收发，就需要这根线。这是一根USB转TTL的编程线、写频线，最早买来是为了给817写频用的，PL-2302芯片的。
5. 最后在准备一些磁环，套在做好的线两端，用来抑制杂散信号的干扰。


##### FT-817的DATA接口

在FT-817手册的第38/41页，有两张图，说明了DATA接口的连线方案。FT8使用的是AFSK调制模式，只用到了DATA接口的1200bps的针脚接口。所以参考38页那个也行。下边这个是41页那张图，说明了DATA接口所有的定义和连接方式。

![FT-817 DATA接口定义](/images/Screen_Shot_2018-06-04_at_11.16.27.png)


**MD6接口的定义：**


| ![插座正面](/images/150px-MiniDIN-6_Connector_Pinout.svg.png) | 插座正面图 |
| :---------------------------------------------: | :----------------------------------------------------------: |
| ![插座镜像](/images/150px-MiniDIN-6_Connector_Pinout2.svg.png) | 连线的时候要注意，对应的是插座正面的镜像标准画法反面图的针脚应该是黑色的圆点，表示是针 |

下边这张对照表，对应了DATA针脚定义、YAESU的CT-39A连接线的线束颜色、我买的MD6的线束颜色、3.5mm立体声接头的接线对照表。我没买CT-39A，我买的那个MD6线的颜色也不是标准的。所以要用万用表一个个测量，对应出每个针脚的位置。

|	针脚	|	标签	|	CT-39A	|	我的MD6线的颜色	|	声卡接线方式	|
|	---- | ---- | ---- | ---- | ---- |
|	1	|	PKD	|	褐色	|	蓝色	|	Line Out / Green	|
|	2	|	GND	|	红色	|	紫色	|	Line I/O GND	|
|	3	|	PTT	|	橙色	|	黄色	|	空	|
|	4	|	RX9600	|	黄色	|	白色	| 空	|
|	5	|	RX1200	|	绿色	|	黑色	| Line In / Red	|
|	6	|	PKS(SQL)|	蓝色	|	褐色	| 空	|



##### 关于声卡的技术参数

网上有一些成品化的连接器方案。比如使用了音频隔离变压器、光偶合的ACC控制电路。我这个主要还是因为只在QRP设备上用，没考虑太多。但是咨询了卖家这个USB声卡的参数，得到了一些参考数据。

这是绿联的US205 USB声卡，用的是HS-100B芯片的USB声卡方案，据卖家讲：
-   Line-OUT：负载16Ω，功率可达60mW。所以我推算峰值输出电压不高于980mV

-   MIC-IN：输入57mV，输出功率是0dBFS，失真小于0.02，当超过57mV时，失真就会开始急剧加大；最大输入可达到125mV，输入功率为2dBFS，失真24% 

-   MIC-IN：输入57mV，输出功率是0dBFS，失真小于0.02，当超过57mV时，失真就会开始急剧加大；最大输入可达到125mV，输入功率为2dBFS，失真24%

在FT-817的DATA接口的电压指标是这样的：
-   封包数据输入（对应声卡的Line-OUT）：阻抗10 kΩ；最大输入电压40 mVpp 用于 1200 bps；2.0 Vpp 用于 9600 bps
-   1200 bps 封包数据输出（对应声卡的MIC-IN）：阻抗10 kΩ，最大输出电压300 mVpp


所以，在音频方面，个人感觉：
-   发射时，把USB声卡的音量降低，可以降低输出电压，观察系统的Audio MIDI Setup，降到-29dB左右，可以匹配到817的信号输入电压。具体表现还是要观察ALC电平指示，4-5格就不错了。


-   接收时，因为817的DATA接口提供的输出功率是固定的，所以显然大于USB声卡最佳电压两三倍了，按客服说的“信号失真24%”了。不过这对于FT8来说还能接受吧。在接收本地电台的FT8时、还有信噪比很高的信号时，瀑布上总是有附近频率产生的干扰信号，可能就是这个失真带来的问题吧。



我在各种线上都加了磁环，这套线目前性能稳定。我也担心传说中的烧817的话题，买个连接盒子还是更好些。

-   接收时，因为817的DATA接口提供的输出功率是固定的，所以显然大于USB声卡最佳电压两三倍了，按客服说的“信号失真24%”了。不过这对于FT8来说还能接受吧。在接收本地电台的FT8时、还有信噪比很高的信号时，瀑布上总是有附近频率产生的干扰信号，可能就是这个失真带来的问题吧。。

我在各种线上都加了磁环，这套线目前性能稳定。我也担心传说中的烧817的话题，买个连接盒子还是更好些。

BTW：**观察系统的Audio MIDI Setup，降到-29dB左右**，这段我也不确定效果如何，因为最终我发现USB声卡音量从大到小，FT-817的ALC电平几乎没变化。而且我FT-817上DIG MIC、SSB MIC、PSK MIC 的设置，都是默认的50，发射起来ALC很稳定，四、五格。这可能跟我加了磁环有关系？
